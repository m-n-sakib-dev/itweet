{% load static %}
<link rel="stylesheet" href="{% static 'css/layouts_style/home_left_panel_style.css' %}" />
<script src="{% static 'scripts/nav_scripts/home_left_panel.js' %}"></script>
<div class="left-panel-dark d-flex flex-column justify-content-between py-4 vh-100">
  <!-- Top Section -->
  <div class="px-auto">
    <!-- Logo -->
    <div class="text-center mb-4">
      <a class="navbar-brand logo-gradient" href="{% url 'home' %}"><img src="{% static 'favicon.ico' %}" alt="iTweet Logo" class="nav-logo-img" />Tweet</a>
    </div>

    <!-- Navigation Menu -->
    <div class="nav-menu">
      <a class="nav-item" href="{% url 'home' %}">
        <div class="nav-icon-wrapper gradient-primary">
          <i class="bi bi-house-fill"></i>
        </div>
        <span class="nav-label">Home</span>
      </a>

      <a class="nav-item"
        href="{% if user.is_authenticated %}
          {% url 'user_profile' user_id=user.id %}
        {% else %}
          {% url 'user_profile' user_id=1 %}
        {% endif %}">
        <div class="nav-icon-wrapper gradient-success">
          <i class="bi bi-person-fill"></i>
        </div>
        <span class="nav-label">Profile</span>
      </a>

      <a class="nav-item" href="#">
        <div class="nav-icon-wrapper gradient-warning">
          <i class="bi bi-bell-fill"></i>
        </div>
        <span class="nav-label">Notifications</span>
        <span class="notification-dot d-none"></span>
      </a>

      <a class="nav-item" href="{% url 'admin:index' %}">
        <div class="nav-icon-wrapper gradient-danger">
          <i class="bi bi-shield-lock-fill"></i>
        </div>
        <span class="nav-label">Admin</span>
      </a>

      <a class="nav-item" id="left_panel_search_btn" data-bs-toggle="offcanvas" href="#offcanvasExample" role="button" aria-controls="offcanvasExample">
        <div class="nav-icon-wrapper gradient-info">
          <i class="bi bi-search"></i>
        </div>
        <span class="nav-label">Search</span>
      </a>

      <a class="nav-item" href="#">
        <div class="nav-icon-wrapper gradient-purple">
          <i class="bi bi-bookmark-fill"></i>
        </div>
        <span class="nav-label">Saved Tweet</span>
      </a>
    </div>

    <!-- Tweet Button -->
    <a href="{% url 'tweet_create' %}">
      <div class="mt-3 px-1">
        <button class="btn btn-tweet-gradient w-100 py-2"><i class="bi bi-feather me-1"></i><span class="nav-label">Tweet</span></button>
      </div>
    </a>
  </div>

  <!-- Bottom Section - User Profile -->
  <div class="px-3">
    {% if user.is_authenticated %}
      <div class="user-profile-dropup position-relative">
        <div class="user-profile-card" data-bs-toggle="dropdown" aria-expanded="false">
          <div class="user-avatar2">
            <img src="{{ user.profile.profile_picture.url }}" alt="{{ user.username }}" class="profile-img" />
          </div>
          <div class="user-info d-none d-lg-block">
            <div class="d-none d-lg-block">
              <p class="left_panel_username d-none d-xl-block">{{ user.profile.full_name|default:user.username }}</p>
              <p class="user-handle">{{ user.username }}</p>
            </div>
          </div>
          <div class="dropdown-arrow">
            <i class="bi bi-chevron-down"></i>
          </div>
        </div>
        <div class="dropdown-container">
          <ul class="dropdown-menu dropdown-menu-dark user-dropdown">
            <li>
              <a class="dropdown-item" href="{% url 'user_profile' user_id=user.id %}"><i class="bi bi-person me-2"></i>Profile</a>
            </li>
            <li>
              <a class="dropdown-item" href="#"><i class="bi bi-gear me-2"></i>Settings</a>
            </li>
            <li>
              <hr class="dropdown-divider" />
            </li>
            <li>
              <a class="dropdown-item text-danger" href="{% url 'logout' %}"><i class="bi bi-box-arrow-right me-2"></i>Logout</a>
            </li>
          </ul>
        </div>
      </div>
    {% else %}
      <div class="login-prompt">
        <a class="btn btn-outline-gradient-home-left w-100 py-2" href="{% url 'login' %}"><i class="bi bi-box-arrow-in-right me-2"></i>Login</a>
      </div>
    {% endif %}
  </div>

  <div class="offcanvas offcanvas-start dark-mode cosmic-2" tabindex="-1" id="offcanvasExample" aria-labelledby="offcanvasExampleLabel">
    <div class="offcanvas-header">
      <div class="search-input-wrapper">
        <i class="bi bi-search search-icon"></i>
        <input type="text" class="search-input" placeholder="Search iTweet..." id="left_panel_searchInput" />
        <button class="clear-search" id="left_panel_clearSearch"><i class="bi bi-x"></i></button>
      </div>
      <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
    </div>
    <div class="offcanvas-body">
      <div class="search-results" id="left_panel_search_result">
        <div class="no-results">
          <i class="bi bi-search"></i>
          Search for users, tweets, or hashtags
        </div>
      </div>
    </div>
  </div>
</div>
